---
title: "Quickstart"
description: "Integrate Emerge in 30 minutes"
---

This guide walks you through collecting your first user consent and querying their data.

## Prerequisites

<Check>Control Room account with API credentials</Check>

Don't have an account? [Sign up here](https://dashboard.emergedata.ai).

## Step 1: Configure your flow

Set up your company branding for the consent flow.

<CodeGroup>

```typescript TypeScript
const response = await fetch('https://link.emergedata.ai/configs', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${API_TOKEN}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    company_name: 'Your Company',
    logo_url: 'https://yourcompany.com/logo.png',
    privacy_policy_url: 'https://yourcompany.com/privacy',
    redirect_uris: ['https://yourcompany.com/callback']
  })
});
```

```python Python
import requests

response = requests.post(
    'https://link.emergedata.ai/configs',
    headers={
        'Authorization': f'Bearer {API_TOKEN}',
        'Content-Type': 'application/json'
    },
    json={
        'company_name': 'Your Company',
        'logo_url': 'https://yourcompany.com/logo.png',
        'privacy_policy_url': 'https://yourcompany.com/privacy',
        'redirect_uris': ['https://yourcompany.com/callback']
    }
)
```

</CodeGroup>

## Step 2: Generate a signed link

Create an HMAC-signed URL that users click to start the consent flow.

<CodeGroup>

```typescript TypeScript
import crypto from 'crypto';

function createLinkUrl(params: {
  clientId: string;
  clientSecret: string;
  redirectUri: string;
  userId: string;
}) {
  const timestamp = Math.floor(Date.now() / 1000).toString();
  const state = crypto.randomBytes(16).toString('hex');

  const queryParams = new URLSearchParams({
    client_id: params.clientId,
    redirect_uri: params.redirectUri,
    state: state,
    timestamp: timestamp,
    uid: params.userId,
    flow_version: 'lm'
  });

  // Sort parameters alphabetically for signature
  const sortedParams = new URLSearchParams([...queryParams.entries()].sort());
  const signatureBase = sortedParams.toString();

  const signature = crypto
    .createHmac('sha256', params.clientSecret)
    .update(signatureBase)
    .digest('hex');

  queryParams.append('signature', signature);

  return `https://link.emergedata.ai/link?${queryParams.toString()}`;
}

// Usage
const linkUrl = createLinkUrl({
  clientId: 'your_client_id',
  clientSecret: 'your_client_secret',
  redirectUri: 'https://yourcompany.com/callback',
  userId: 'user_12345'
});
```

```python Python
import hmac
import hashlib
import time
import secrets
from urllib.parse import urlencode

def create_link_url(
    client_id: str,
    client_secret: str,
    redirect_uri: str,
    user_id: str
) -> str:
    timestamp = str(int(time.time()))
    state = secrets.token_hex(16)

    params = {
        'client_id': client_id,
        'redirect_uri': redirect_uri,
        'state': state,
        'timestamp': timestamp,
        'uid': user_id,
        'flow_version': 'lm'
    }

    # Sort parameters alphabetically for signature
    sorted_params = sorted(params.items())
    signature_base = urlencode(sorted_params)

    signature = hmac.new(
        client_secret.encode(),
        signature_base.encode(),
        hashlib.sha256
    ).hexdigest()

    params['signature'] = signature

    return f"https://link.emergedata.ai/link?{urlencode(params)}"

# Usage
link_url = create_link_url(
    client_id='your_client_id',
    client_secret='your_client_secret',
    redirect_uri='https://yourcompany.com/callback',
    user_id='user_12345'
)
```

</CodeGroup>

## Step 3: Handle the callback

After the user completes the consent flow, they're redirected to your `redirect_uri` with these parameters:

| Parameter | Description |
|-----------|-------------|
| `status` | `success`, `reauthorized`, or `failure` |
| `state` | The state value you provided (verify this matches) |
| `uid` | The user identifier you provided |
| `flow_version` | The flow version used |
| `error_code` | Only present if `status=failure` |

<CodeGroup>

```typescript TypeScript
// Express.js example
app.get('/callback', (req, res) => {
  const { status, state, uid, error_code } = req.query;

  // Verify state matches what you stored
  if (!verifyState(state)) {
    return res.status(400).send('Invalid state');
  }

  if (status === 'success' || status === 'reauthorized') {
    // Consent granted - data export will start automatically
    // You'll receive a webhook when data is ready
    console.log(`User ${uid} granted consent`);
    res.redirect('/success');
  } else {
    console.log(`Consent failed: ${error_code}`);
    res.redirect('/error');
  }
});
```

```python Python
# FastAPI example
from fastapi import FastAPI, Request
from fastapi.responses import RedirectResponse

app = FastAPI()

@app.get('/callback')
async def callback(
    status: str,
    state: str,
    uid: str,
    error_code: str = None
):
    # Verify state matches what you stored
    if not verify_state(state):
        return RedirectResponse('/error')

    if status in ('success', 'reauthorized'):
        # Consent granted - data export will start automatically
        print(f'User {uid} granted consent')
        return RedirectResponse('/success')
    else:
        print(f'Consent failed: {error_code}')
        return RedirectResponse('/error')
```

</CodeGroup>

## Step 4: Query user data

Once consent is granted and data is exported, query it using the sync endpoints.

<CodeGroup>

```typescript TypeScript
async function getUserSearchHistory(uid: string) {
  const response = await fetch(
    `https://query.emergedata.ai/v1/sync/get_search?uid=${uid}`,
    {
      headers: {
        'Authorization': `Bearer ${API_TOKEN}`
      }
    }
  );

  const data = await response.json();
  return data;
}

// Usage
const searchHistory = await getUserSearchHistory('user_12345');
console.log(searchHistory.data);
// [{ query: "best restaurants nearby", timestamp: "2024-01-15T10:30:00Z" }, ...]
```

```python Python
import requests

def get_user_search_history(uid: str) -> dict:
    response = requests.get(
        f'https://query.emergedata.ai/v1/sync/get_search',
        params={'uid': uid},
        headers={'Authorization': f'Bearer {API_TOKEN}'}
    )
    return response.json()

# Usage
search_history = get_user_search_history('user_12345')
print(search_history['data'])
# [{'query': 'best restaurants nearby', 'timestamp': '2024-01-15T10:30:00Z'}, ...]
```

</CodeGroup>

## Next steps

<CardGroup cols={2}>
  <Card title="Link API Guide" icon="link" href="/link/overview">
    Deep dive into consent flow options
  </Card>
  <Card title="Query API Guide" icon="database" href="/query/overview">
    Learn about sync vs async queries
  </Card>
  <Card title="Webhooks" icon="webhook" href="/link/webhooks">
    Get notified when data is ready
  </Card>
  <Card title="SDK Reference" icon="code" href="/sdks/typescript">
    Full SDK implementation examples
  </Card>
</CardGroup>
